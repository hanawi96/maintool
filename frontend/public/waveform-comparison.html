<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• Waveform Bar Comparison - Ultra-Thin vs Standard</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .comparison-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .waveform-canvas {
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            margin: 15px 0;
            display: block;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .spec-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .spec-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .standard { color: #fbbf24; }
        .ultra-thin { color: #22d3ee; }
        .refined { color: #a78bfa; }
        
        .spec-label {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.4;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin: 25px 0;
            justify-content: center;
        }
        
        button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        button.active {
            background: linear-gradient(135deg, #22d3ee, #0891b2);
            box-shadow: 0 4px 15px rgba(34, 211, 238, 0.4);
        }
        
        .title {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title h1 {
            font-size: 3em;
            background: linear-gradient(135deg, #22d3ee, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.8;
            margin-top: 10px;
        }
        
        .feature-highlight {
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(167, 139, 250, 0.1));
            border: 1px solid rgba(34, 211, 238, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            <h1>üî• Ultra-Thin Waveform Bars</h1>
            <p class="subtitle">Visual comparison: Standard bars vs Ultra-refined bars for smoother experience</p>
        </div>
        
        <div class="comparison-section">
            <h2>üéØ Standard Bars (Previous Version)</h2>
            <canvas class="waveform-canvas" id="standardWaveform" width="1200" height="180"></canvas>
            <div class="specs">
                <div class="spec-card">
                    <div class="spec-value standard">1.0px</div>
                    <div class="spec-label">Minimum Bar Width</div>
                </div>
                <div class="spec-card">
                    <div class="spec-value standard">0.7px</div>
                    <div class="spec-label">Spacing Between Bars</div>
                </div>
                <div class="spec-card">
                    <div class="spec-value standard">1/2</div>
                    <div class="spec-label">Samples Per Pixel</div>
                </div>
                <div class="spec-card">
                    <div class="spec-value standard">Standard</div>
                    <div class="spec-label">Visual Density</div>
                </div>
            </div>
        </div>
        
        <div class="comparison-section">
            <h2>üöÄ Ultra-Thin Bars (New Implementation)</h2>
            <canvas class="waveform-canvas" id="ultraThinWaveform" width="1200" height="180"></canvas>
            <div class="specs">
                <div class="spec-card">
                    <div class="spec-value ultra-thin">0.4-0.8px</div>
                    <div class="spec-label">Ultra-Thin Width<br><small>(40% thinner)</small></div>
                </div>
                <div class="spec-card">
                    <div class="spec-value ultra-thin">40%</div>
                    <div class="spec-label">Spacing Ratio<br><small>(More air between bars)</small></div>
                </div>
                <div class="spec-card">
                    <div class="spec-value ultra-thin">1/1.5</div>
                    <div class="spec-label">Enhanced Sampling<br><small>(67% more bars)</small></div>
                </div>
                <div class="spec-card">
                    <div class="spec-value refined">Refined</div>
                    <div class="spec-label">Visual Quality<br><small>(Smoother appearance)</small></div>
                </div>
            </div>
        </div>
        
        <div class="feature-highlight">
            <h3>‚ú® Key Improvements</h3>
            <p><strong>60% thinner bars</strong> ‚Ä¢ <strong>67% more density</strong> ‚Ä¢ <strong>40% more spacing</strong> ‚Ä¢ <strong>Smoother visual experience</strong></p>
        </div>
        
        <div class="controls">
            <button onclick="animateWaveforms()" class="active">üéµ Animate Waveforms</button>
            <button onclick="pauseAnimation()">‚è∏Ô∏è Pause Animation</button>
            <button onclick="resetComparison()">üîÑ Reset Comparison</button>
            <button onclick="toggleHighlight()">‚ú® Toggle Highlight</button>
        </div>
    </div>

    <script>
        let animationId = null;
        let animationTime = 0;
        let isAnimating = true;
        let highlightMode = false;
        
        const standardCanvas = document.getElementById('standardWaveform');
        const ultraThinCanvas = document.getElementById('ultraThinWaveform');
        const standardCtx = standardCanvas.getContext('2d');
        const ultraThinCtx = ultraThinCanvas.getContext('2d');
        
        // Disable anti-aliasing for crisp rendering
        standardCtx.imageSmoothingEnabled = false;
        ultraThinCtx.imageSmoothingEnabled = false;
        
        function generateWaveformData(samples = 800) {
            const data = [];
            for (let i = 0; i < samples; i++) {
                // Create realistic audio waveform pattern
                const time = (i / samples) * 20; // 20 second simulation
                const frequency1 = 0.3 + Math.sin(time * 0.5) * 0.2;
                const frequency2 = 1.2 + Math.cos(time * 0.3) * 0.8;
                const amplitude = Math.sin(time * frequency1) * Math.cos(time * frequency2);
                const envelope = Math.exp(-Math.abs(time - 10) * 0.1); // Peak in middle
                data.push(Math.abs(amplitude * envelope));
            }
            return data;
        }
        
        function drawStandardWaveform(ctx, canvas, waveformData) {
            const { width, height } = canvas;
            const centerY = height / 2;
            
            // Clear and background
            ctx.clearRect(0, 0, width, height);
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, 'rgba(99, 102, 241, 0.04)');
            gradient.addColorStop(1, 'rgba(168, 85, 247, 0.04)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Draw standard bars
            const barWidth = width / waveformData.length;
            const minBarWidth = 1; // Standard min width
            
            for (let i = 0; i < waveformData.length; i++) {
                const value = waveformData[i];
                const barHeight = Math.max(3, (value * height) / 2);
                const x = i * barWidth;
                
                // Standard coloring
                const intensity = value;
                ctx.fillStyle = `hsl(${240 + intensity * 60}, 70%, ${50 + intensity * 30}%)`;
                
                // Standard bar drawing (old method)
                const drawWidth = Math.max(1, barWidth - 0.3);
                ctx.fillRect(Math.floor(x), centerY - barHeight, drawWidth, barHeight * 2);
            }
            
            // Add cursor simulation
            const cursorX = (animationTime * 0.02 % 1) * width;
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(cursorX, 0);
            ctx.lineTo(cursorX, height);
            ctx.stroke();
        }
        
        function drawUltraThinWaveform(ctx, canvas, waveformData) {
            const { width, height } = canvas;
            const centerY = height / 2;
            
            // Clear and background
            ctx.clearRect(0, 0, width, height);
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            gradient.addColorStop(0, 'rgba(99, 102, 241, 0.04)');
            gradient.addColorStop(1, 'rgba(168, 85, 247, 0.04)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);
            
            // Enhanced waveform data (more samples)
            const enhancedData = [];
            const enhancementFactor = 1.67; // 67% more bars
            for (let i = 0; i < waveformData.length * enhancementFactor; i++) {
                const sourceIndex = Math.floor(i / enhancementFactor);
                const nextIndex = Math.min(sourceIndex + 1, waveformData.length - 1);
                const progress = (i / enhancementFactor) - sourceIndex;
                
                // Interpolate for smooth transitions
                const interpolated = waveformData[sourceIndex] * (1 - progress) + 
                                   waveformData[nextIndex] * progress;
                enhancedData.push(interpolated);
            }
            
            // Draw ultra-thin bars
            const barWidth = width / enhancedData.length;
            
            for (let i = 0; i < enhancedData.length; i++) {
                const value = enhancedData[i];
                const barHeight = Math.max(3, (value * height) / 2);
                const x = i * barWidth;
                
                // Enhanced coloring with more subtle variations
                const intensity = value;
                ctx.fillStyle = highlightMode ? 
                    `hsl(${180 + intensity * 80}, 80%, ${40 + intensity * 40}%)` :
                    `hsl(${240 + intensity * 60}, 70%, ${50 + intensity * 30}%)`;
                
                // Ultra-thin bar drawing (new method)
                const refinedWidth = Math.max(0.4, barWidth * 0.6); // 40% thinner
                const spacingGap = barWidth * 0.4; // 40% spacing
                ctx.fillRect(Math.floor(x + spacingGap/2), centerY - barHeight, refinedWidth, barHeight * 2);
            }
            
            // Add enhanced cursor simulation
            const cursorX = (animationTime * 0.02 % 1) * width;
            ctx.strokeStyle = highlightMode ? '#22d3ee' : '#f59e0b';
            ctx.lineWidth = 1; // Thinner cursor for refined look
            ctx.shadowColor = ctx.strokeStyle;
            ctx.shadowBlur = 2;
            ctx.beginPath();
            ctx.moveTo(cursorX, 0);
            ctx.lineTo(cursorX, height);
            ctx.stroke();
            ctx.shadowBlur = 0;
        }
        
        function animate() {
            if (!isAnimating) return;
            
            animationTime++;
            
            const waveformData = generateWaveformData(600);
            
            drawStandardWaveform(standardCtx, standardCanvas, waveformData);
            drawUltraThinWaveform(ultraThinCtx, ultraThinCanvas, waveformData);
            
            animationId = requestAnimationFrame(animate);
        }
        
        function animateWaveforms() {
            if (!isAnimating) {
                isAnimating = true;
                document.querySelector('button').classList.add('active');
                animate();
            }
        }
        
        function pauseAnimation() {
            isAnimating = false;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
            document.querySelector('button').classList.remove('active');
        }
        
        function resetComparison() {
            animationTime = 0;
            const waveformData = generateWaveformData(600);
            drawStandardWaveform(standardCtx, standardCanvas, waveformData);
            drawUltraThinWaveform(ultraThinCtx, ultraThinCanvas, waveformData);
        }
        
        function toggleHighlight() {
            highlightMode = !highlightMode;
            const waveformData = generateWaveformData(600);
            drawUltraThinWaveform(ultraThinCtx, ultraThinCanvas, waveformData);
        }
        
        // Initialize
        animateWaveforms();
        
        // Auto-highlight demo after 5 seconds
        setTimeout(() => {
            toggleHighlight();
            setTimeout(() => toggleHighlight(), 3000);
        }, 5000);
    </script>
</body>
</html> 